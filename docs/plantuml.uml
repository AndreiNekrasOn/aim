'//www.plantuml.com/plantuml/png/bLJ1RXGn3BtdAw9UE1LLSEE0AX2_m0MXaMV6tRKsSOROsNP1_3lPh9YrPjJLz1ZxEU_bsSwZA6GjCJWv44-G8Vf0Z7gQqAUi-sGId4OKdFo71nFCm8TpyEE3SnCC1zYXlmEAT_wFytwEz24D1xa4lVynfDWJu_lfzFCI6370wNhSWPeaFNMj_Xg9wMZolmeMSnHY0vLKyc2pKo0rnsVIOT_EDM0KH-3o18EMJBpxBxn9voEUKZQIbXbyCGn_5_Tc5CqqA8uTP0HpyoBJjTvOWYK0UJGqZSeG3IdZR7YDi7drmawXM09eojOckBYskXTPIGddPcvsp3wbWhXJw0FUU47JS1qQJjsGGY2Xn9tLzmODYxervv6aGA3Ve9N5p2jB2jWT2P_Hk4II8fvxiif4q2aa3TIRL6EhVE_yrvJHPmoDHlOqYRlsoD_VVpOzyfzy4HHd8WrWkjP06NSaYXb7J-nCUgwO7r_H4RWIYZF1XfbLL8pcQejuKL0yg_vo5h2KRHV2o5jQRXwos9GD5MQBrog7ZA0LD2_-6WAzfDoBC-k-DXbV57aKP_-R6x3vpxg1cR-c6vZgwpTMqjDhnjusoBJTsRNQN5JvlzkXNykmi__w-ALUC1zHdDsApJLsNxOMFIAF9OP_

@startuml
skinparam linetype ortho
skinparam nodesep 20
skinparam ranksep 30

package "aim" {
  package "blocks" {
    [combine.py]
    [delay.py]
    [gate.py]
    [if_block.py]
    [move.py]
    [queue.py]
    [sink.py]
    [source.py]
    [split.py]
    [switch.py]

    package "manufacturing" {
      [conveyor_block.py]
      [conveyor_exit.py]
    }

    package "restricted_area" {
      [restricted_area_start.py]
      [restricted_area_end.py]
    }
  }

  package "core" {
    [agent.py]
    [block.py]
    [simulator.py]
    [space.py]
  }

  package "entities" {
    package "manufacturing" {
      [conveyor.py]
      [turn_table.py]
    }
  }

  package "spaces" {
    [no_collision_space.py]
    package "manufacturing" {
      [conveyor_space.py]
    }
  }

  package "visualization" {
    [console_viewer.py]
    [isometric_viewer.py]
    [matplotlib_viewer.py]
  }
}

' Core relationships
[agent.py] --> [block.py] : uses
[block.py] --> [simulator.py] : registered in
[simulator.py] --> [space.py] : manages
[space.py] --> [agent.py] : tracks state

' Block relationships
[conveyor_block.py] --> [conveyor_space.py] : uses
[conveyor_exit.py] --> [conveyor_space.py] : uses
[source.py] --> [agent.py] : creates
[sink.py] --> [agent.py] : absorbs
[switch.py] --> [block.py] : extends
[if_block.py] --> [block.py] : extends
[delay.py] --> [block.py] : extends
[queue.py] --> [block.py] : extends

' Entity relationships
[conveyor.py] --> [conveyor_space.py] : registered
[turn_table.py] --> [conveyor_space.py] : registered

' Visualization relationships
[console_viewer.py] --> [simulator.py] : observes
[isometric_viewer.py] --> [simulator.py] : observes
[matplotlib_viewer.py] --> [simulator.py] : observes
@enduml
